<html>
  <body>
    <script src="elasticfeed.js"></script>
    <script>

      window.onload = function() {

        elasticfeed.init({
          channel: {
            url: 'ws://localhost:80',
            transport: 'ws'
          }
        });

        feed = elasticfeed.initFeed('0000000002', {
          outputContainerId: 'my-elastic-feed',
          stylerFunction: function(data) {
            return '<div style="height:50px; border:1px dotted; border-color: grey;">' + data + '</div>';
          }
        });

        feed.channel.on('join', function(chid, ts) {
          feed.addEntry(chid + " joined the chat room");
        });

        feed.channel.on('leave', function(chid, ts) {
          feed.addEntry(chid + " left the chat room");
        });

        feed.channel.on('message', function(chid, ts, data) {
          feed.addEntry(chid + " " + JSON.stringify(data));
        });

        window['socket'] = feed.socket
      }

    </script>

    <div id="my-elastic-feed"></div>
  </body>
</html>
