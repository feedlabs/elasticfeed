<html>
  <body>
    <script src="elasticfeed.js"></script>
    <script>

      window.onload = function() {

        elasticfeed.init({
          channel: {
            url: 'ws://localhost:80',
            transport: 'ws'
          }
        });

        feed1 = elasticfeed.initFeed('0000000002', {
          outputContainerId: 'my-elastic-feed-left',
          stylerFunction: function(data) {
            return '<div style="height:50px; border:1px dotted; border-color: blue;">' + data + '</div>';
          }
        });

        feed2 = elasticfeed.initFeed('0000000003', {
          outputContainerId: 'my-elastic-feed-right',
          stylerFunction: function(data) {
            return '<div style="height:50px; border:1px dotted; border-color: yellow;">' + data + '</div>';
          }
        });

        feed1.channel.on('join', function(chid, ts) {
          feed1.addEntry(chid + " joined the chat room");
        });

        feed1.channel.on('leave', function(chid, ts) {
          feed1.addEntry(chid + " left the chat room");
        });

        feed1.channel.on('message', function(chid, ts, data) {
          feed1.addEntry(chid + " " + JSON.stringify(data));
        });

        feed2.channel.on('join', function(chid, ts) {
          feed2.addEntry(chid + " joined the chat room");
        });

        feed2.channel.on('leave', function(chid, ts) {
          feed2.addEntry(chid + " left the chat room");
        });

        feed2.channel.on('message', function(chid, ts, data) {
          feed2.addEntry(chid + " " + JSON.stringify(data));
        });

        window['socket'] = feed1.socket
      }

    </script>

    <div id="my-elastic-feed-left" style="background-color: grey; width:50%; float: left"></div>
    <div id="my-elastic-feed-right" style="background-color: grey; width:50%; float: right"></div>
  </body>
</html>
